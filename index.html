<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Malla Interactiva - FÃ­sica UIS</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #fff0f5;
      margin: 20px;
    }
    h1 {
      text-align: center;
      color: #c71585;
    }
    .semestre {
      margin: 10px 0;
      border: 1px solid #f4c2c2;
      border-radius: 5px;
      background: #ffe4e1;
    }
    .semestre-header {
      padding: 10px;
      cursor: pointer;
      font-size: 18px;
      font-weight: bold;
      color: #900C3F;
    }
    .contenido {
      display: none;
      padding: 0 10px 10px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th, td {
      border: 1px solid #f4c2c2;
      padding: 8px;
      text-align: left;
    }
    th {
      background: #ffc0cb;
    }
    .bloqueada {
      opacity: 0.4;
      pointer-events: none;
    }
    .materia input[type="checkbox"] {
      transform: scale(1.2);
      margin-right: 10px;
    }
  </style>
</head>
<body>
  <h1>Malla Interactiva â€“ FÃ­sica UIS</h1>

  <div id="contenedor-materias"></div>

  <script>
    const materias = [
      // [Semestre, ID, Nombre, CrÃ©ditos, Prerrequisitos]
      [1, 'fund-mat', 'Fundamentos de MatemÃ¡ticas', 3, []],
      [1, 'calc-dif', 'CÃ¡lculo Diferencial', 4, []],
      [1, 'alg-lineal', 'Ãlgebra Lineal', 3, []],
      [1, 'fis-mec', 'FÃ­sica MecÃ¡nica', 4, []],
      [1, 'lab-mec', 'Laboratorio de MecÃ¡nica', 2, []],
      [1, 'comunic', 'Competencias Comunicativas', 2, []],

      [2, 'calc-int', 'CÃ¡lculo Integral', 4, ['calc-dif']],
      [2, 'geom-vect', 'GeometrÃ­a Vectorial', 3, ['alg-lineal']],
      [2, 'fis-onda', 'FÃ­sica Ondulatoria y TermodinÃ¡mica', 4, ['fis-mec']],
      [2, 'lab-onda', 'Lab. de Ondas y TermodinÃ¡mica', 2, ['lab-mec']],
      [2, 'ingles1', 'InglÃ©s I', 2, []],

      [3, 'calc-vec', 'CÃ¡lculo Vectorial', 4, ['calc-int']],
      [3, 'fis-elec', 'FÃ­sica ElectromagnÃ©tica', 4, ['fis-onda']],
      [3, 'lab-elec', 'Laboratorio de Electromagnetismo', 2, ['lab-onda']],
      [3, 'ecuaciones', 'Ecuaciones Diferenciales', 3, ['calc-int', 'alg-lineal']],
      [3, 'ingles2', 'InglÃ©s II', 2, ['ingles1']],

      [4, 'mec-ana', 'MecÃ¡nica AnalÃ­tica', 4, ['fis-mec', 'calc-vec']],
      [4, 'met-mat1', 'MÃ©todos MatemÃ¡ticos I', 3, ['ecuaciones']],
      [4, 'fund-elec', 'Fundamentos de ElectrÃ³nica', 3, []],
      [4, 'lab-elec2', 'Laboratorio de ElectrÃ³nica', 2, []],
      [4, 'ingles3', 'InglÃ©s III', 2, ['ingles2']],
      [4, 'socio1', 'FormaciÃ³n SociohumanÃ­stica I', 2, []],

      [5, 'mec-cuant1', 'MecÃ¡nica CuÃ¡ntica I', 4, ['mec-ana', 'met-mat1']],
      [5, 'met-mat2', 'MÃ©todos MatemÃ¡ticos II', 3, ['met-mat1']],
      [5, 'fis-moderna', 'FÃ­sica Moderna', 3, []],
      [5, 'lab-moderna', 'Laboratorio de FÃ­sica Moderna', 2, []],
      [5, 'ingles4', 'InglÃ©s IV', 2, ['ingles3']],
      [5, 'socio2', 'FormaciÃ³n SociohumanÃ­stica II', 2, ['socio1']],

      [6, 'mec-cuant2', 'MecÃ¡nica CuÃ¡ntica II', 4, ['mec-cuant1']],
      [6, 'fis-estad', 'FÃ­sica EstadÃ­stica', 3, ['fis-moderna', 'met-mat2']],
      [6, 'optica', 'Ã“ptica', 3, []],
      [6, 'lab-optica', 'Laboratorio de Ã“ptica', 2, []],
      [6, 'electiva1', 'Electiva Profesional I', 2, []],

      [7, 'electro', 'ElectrodinÃ¡mica', 3, ['fis-elec', 'met-mat2']],
      [7, 'estado-solido', 'FÃ­sica del Estado SÃ³lido', 3, []],
      [7, 'semi1', 'Seminario de InvestigaciÃ³n I', 2, []],
      [7, 'proy1', 'Proyecto de InvestigaciÃ³n I', 3, []],
      [7, 'electiva2', 'Electiva Profesional II', 2, []],

      [8, 'rel-cosmo', 'Relatividad y CosmologÃ­a', 3, ['mec-cuant2', 'fis-moderna']],
      [8, 'fis-nuclear', 'FÃ­sica Nuclear', 3, ['mec-cuant2']],
      [8, 'semi2', 'Seminario de InvestigaciÃ³n II', 2, ['semi1']],
      [8, 'proy2', 'Proyecto de InvestigaciÃ³n II', 3, ['proy1']],
      [8, 'electiva3', 'Electiva Profesional III', 2, []],

      [9, 'trabajo', 'Trabajo de Grado', 6, ['proy2']],
      [9, 'electiva4', 'Electiva Profesional IV', 2, []],
      [9, 'electiva5', 'Electiva Profesional V', 2, []]
    ];

    const contenedor = document.getElementById('contenedor-materias');
    const materiasAprobadas = new Set(JSON.parse(localStorage.getItem('aprobadas') || '[]'));

    function crearSemestres() {
      const porSemestre = {};
      materias.forEach(([sem, id, nombre, creditos, prereqs]) => {
        if (!porSemestre[sem]) porSemestre[sem] = [];
        porSemestre[sem].push({ id, nombre, creditos, prereqs });
      });

      Object.keys(porSemestre).sort().forEach(sem => {
        const grupo = document.createElement('div');
        grupo.className = 'semestre';
        grupo.innerHTML = `
          <div class="semestre-header" onclick="toggle(this)">ðŸ“š Semestre ${sem}</div>
          <div class="contenido"><table><tr><th>Materia</th><th>CrÃ©ditos</th></tr></table></div>
        `;
        const tabla = grupo.querySelector('table');

        porSemestre[sem].forEach(m => {
          const fila = document.createElement('tr');
          fila.className = 'materia';
          fila.dataset.id = m.id;
          fila.dataset.prereqs = m.prereqs.join(',');
          if (!m.prereqs.every(p => materiasAprobadas.has(p))) fila.classList.add('bloqueada');

          fila.innerHTML = `
            <td><input type="checkbox" ${materiasAprobadas.has(m.id) ? 'checked' : ''} onchange="marcar(this)">${m.nombre}</td>
            <td>${m.creditos}</td>
          `;
          tabla.appendChild(fila);
        });

        contenedor.appendChild(grupo);
      });
    }

    function toggle(el) {
      const content = el.nextElementSibling;
      content.style.display = content.style.display === 'block' ? 'none' : 'block';
    }

    function marcar(checkbox) {
      const fila = checkbox.closest('.materia');
      const id = fila.dataset.id;
      if (checkbox.checked) {
        materiasAprobadas.add(id);
      } else {
        materiasAprobadas.delete(id);
      }
      localStorage.setItem('aprobadas', JSON.stringify(Array.from(materiasAprobadas)));
      actualizarDesbloqueo();
    }

    function actualizarDesbloqueo() {
      document.querySelectorAll('.materia').forEach(fila => {
        const requisitos = fila.dataset.prereqs ? fila.dataset.prereqs.split(',') : [];
        const cumplidos = requisitos.every(req => materiasAprobadas.has(req));
        fila.classList.toggle('bloqueada', !cumplidos);
      });
    }

    crearSemestres();
    actualizarDesbloqueo();
  </script>
</body>
</html>
